/* fromone 2015-02-03  by yansm*/
$.extend({getUrlVars:function(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b},getUrlVar:function(a){return $.getUrlVars()[a]},setUrlWidthVars:function(a){var b=[];for(key in a)b.push(key+"="+a[key]+"&");return b=location.href.split("?")[0]+"?"+b.join(""),b=b.substring(0,b.length-1)}}),$(function(){var a=$("body"),b=$(".full-screen"),c={level:0,type:"normal",model:"index"},d=["essay","css","index"],e=function(a){b.removeClass(d.join(" ")).addClass(a).show(),setTimeout(function(){b.addClass("current")},100)},f=function(){b.removeClass("current"),setTimeout(function(){b.hide()},1370)};$(document).on("click",'[click-target="change-btn"]',function(){var a=$(this),b=a.data();g(b)});var g=function(a){var b=$.setUrlWidthVars(a);history.pushState(a,"",b),i(a)};window.addEventListener("popstate",function(a){i(a.state)});var h=function(){},i=function(b){var d=a.data(),e=b;d&&d.level&&d.type&&d.model||(d=c),e&&e.level&&e.type&&e.model||(e=c);var f=d.level,g=e.level;if(f!=g||d.model!=e.model){var h=$.Event("hide."+d.type+"."+d.model+".level_"+f,{l_state:d,n_state:e});console.debug("hide."+d.type+"."+d.model+".level_"+f),a.trigger(h)}},j=function(b,c,d){var e=c.type,g=c.model,d=d+100;$("."+e+"-screen").show().load(g+".html",function(b,i){if("error"==i)return void h();var j=$(this);"bottom"==e&&(d+=1370,f()),setTimeout(function(){j.find("."+g+"-area").addClass("current"),a.data(c)},d)})},k=function(c,d,f){var g=c.type,h=c.model,f=f;a.find("."+h+"-area").removeClass("current"),b.hasClass("current")||(e(d.model),f+=1370),setTimeout(function(){var b=$.Event("show."+d.type+"."+d.model+".level_"+d.level,{l_state:c,n_state:d});$("."+g+"-screen").hide(),a.trigger(b)},f)};a.on("hide.normal.index.level_0",function(c){var d=($(this),0),f=c.n_state;b.hasClass("current")||(e(f.model),d=1370),setTimeout(function(){var b=$.Event("show."+f.type+"."+f.model+".level_"+f.level,{l_state:c.l_state,n_state:c.n_state});a.trigger(b)},d)}).on("show.normal.index.level_0",function(b){var c=($(this),b.n_state);f(),a.data(c)}).on("show.top.essay.level_1",function(a){var b=0;j(a.l_state,a.n_state,b)}).on("hide.top.essay.level_1",function(a){var b=500;k(a.l_state,a.n_state,b)}).on("show.bottom.css.level_1",function(a){var b=0;j(a.l_state,a.n_state,b)}).on("hide.bottom.css.level_1",function(a){var b=0;k(a.l_state,a.n_state,b)}),i($.getUrlVars())});